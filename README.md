# Smart-LED-lamp-Arduino

Описание:
---------------------
В коде реализована работа лампы, которая поворачивается при включении и имеет регулировку уровня света через приближение или отдаление ладони.

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/87d68145-9096-4818-ab6f-692e27a64130)

Принцип работы:
---------------------
За основу взят корпус от сломанной люминисцентной лампы. Свет заменен на 5 светодиодов. Добавлен сервопривод для автоматического разворота, потенциометр для регулирования угла поворота, ультразвуковой датчик для управления включением лампы и силой свечения.
В плафон лампы установлен дальномер, который реагирует только в диапазоне от 0 до 20 см:

  0-3 см - светодиоды выключены, лампа разворачивается в стартовую позицию.
  
  4-20 см - лампа поворачивается в рабочую позицию, интенсивность свечения настраивается от дальности ладони, где 4 см - минимальная яркость, 20 см - максимальная яркость.

Чтобы настроить угол поворота лампы, добавлен потенциометр. Настройка осуществляется только один раз, или меняется при необходимости. Дальше лампа всегда будет выходить на заданную позицию.

Потребуется:
---------------------
1. Каркас лампы
2. Подшипник
3. Контролер Arduino Nano
4. Сервопривод SG90
5. Ультразвуковой датчик HC-SR04
6. Потенциометр (можно без него, указав градус поворота в Скетче)
7. Провода: красный - 150, черный - 150, зеленый (для сервопривода) - 100, обрезки от 5 до 10 см ~ 10 шт
8. Резисторы - 5 шт. 220 Ом
9. Светодиод 3мм - 5 шт.
10. Разъем USP Type-A (папа) или источник питания ~5V

Реализация:
---------------------
1. Разметка проводов.

Из лампы убераем все "лишнее". В своем варианте я укоротил плафон светильника, вырезал дополнительные отверстия под провода, ультразвуковой датчик и потенциометр.
Заготавливаем провода для пайки. Так как Arduino Nano хорошо помещается в боксе, где был патрон от люминисцентной лампы, оптимальное расположение проводов:
![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/eecf114a-ac4b-44aa-a295-c024c7a7969f)

2. Пайка плафона.

Рекомендую потратить время и крепко закрепить Arduino Nano на своем месте. Убедитесь, что Вам будет удобно подключать usb-кабель для кодирования. Я этого не сделал и для загрузки обновления приходилось каждый раз разбирать плафон.
Пайку осуществляем по семе ниже. В плафон пойдет всё, кроме сервопривода. 

LifeHack: гибкие провода можно взять из интернет-кабеля, там их 8 штук, да и стоит такой провод дешевле.

По итогу у нас должен быть готовый плафон и от него выходит 3 длинных провода (плюс, общий минус, pin для серво).

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/f71b8976-3f9b-4d10-881b-5d3098f00f66)

У меня получилось так:
(В этом варианте светодиоды спаяны в одну цепь, так мы теряем мощность)

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/da365674-ff03-43ee-8376-de5d3305c014)

(Светодиоды перепаяны)

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/cf50ccb5-af00-4717-a0ff-67f8673dfbd4)


Теперь 3 длинных провода (плюс, общий минус, pin для серво) можно пропустить по корпусу. На сгибах оставляйте запас по 3 см кабеля, тогда лампу можно будет сгибать без риска обрыва проводов.

3. Установка сервопривода.

В разложенном виде лампа создает Очень большую нагрузку на основание, поэтому прямое подключение маломощного сервопривода SG90 невозможно. Чтобы перенести нагрузку с сервопривода, я использую подшипник.

LifeHack: сразу 8 отличных подшипников можно взять от со старых роликовых коньков. Нам потребуется только 1.

Собираем такую конструкцию:

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/e222a576-3c8e-4c10-8b9e-de4abc80808d)

LifeHack: металлическая скоба сделана из уголка под штукатурку - это очень дешевый и довольно крепкий материал. Искать как "Угол алюминиевый перфорированный 20x20"

В такой конструкции корпус сервопривода жестко крепится к корпусу лампы и внешней стороне подшипника. Сервопривод вращает внутреннюю сторону подшипника, на которую так же винтом закреплена полка - основание. Важно! В моем примере основание будет иметь дополнительное крепление к столу. Чтобы лампа не заваливалась под собственным весом,потребуется полка не менее 15см.

Подкдлючаем сервопривод к 3 проводам, которые мы вывели раннее. Зеленый (pin для серво) подключаем прямо к хвосту, обрезаем излишек. К красному и черному проводу необходимо врезаться удобным для Вас способом. Останется хвост 50+ см из красного и черного провода - подключаем к источнику питания

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/fc65f969-dae8-4c74-85c5-3db6e61aa41a)

![image](https://github.com/Kirill-Kasparov/Smart-LED-lamp-Arduino/assets/131332065/ba743656-e7bf-423b-9979-1aa35e68b491)

